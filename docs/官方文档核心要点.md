# OpenClaw å®˜æ–¹æ–‡æ¡£æ ¸å¿ƒè¦ç‚¹

> **æ¥æº**: docs.openclaw.ai + clawd.org.cn  
> **æ•´ç†æ—¶é—´**: 2026-02-05  
> **ç”¨é€”**: åŸºäºå®˜æ–¹æ–‡æ¡£ä¿®æ­£ä¼˜åŒ–æ–¹æ¡ˆ

---

## ğŸ” ä¸åŸæ–¹æ¡ˆçš„é‡è¦å·®å¼‚

### 1. å‘½ä»¤è¡Œå·¥å…·åç§°

**å®˜æ–¹å®é™…**:
- å›½é™…ç‰ˆ: `openclaw`
- ä¸­æ–‡ç‰ˆ: `openclaw-cn`

**åŸæ–¹æ¡ˆé—®é¢˜**: ä½¿ç”¨äº† `openclaw`ï¼Œéœ€ç¡®è®¤å®é™…éƒ¨ç½²ç‰ˆæœ¬

### 2. æ ¸å¿ƒå‘½ä»¤

**å®˜æ–¹æ ‡å‡†å‘½ä»¤**:
```bash
# å®‰è£…
npm install -g openclaw@latest
# æˆ–ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬
curl -fsSL https://clawd.org.cn/install.sh | bash

# å…¥é—¨å‘å¯¼ï¼ˆæ¨èï¼‰
openclaw onboard --install-daemon

# å¯åŠ¨ç½‘å…³
openclaw gateway --port 18789 --verbose

# çŠ¶æ€æ£€æŸ¥
openclaw status
openclaw health

# è¯Šæ–­ä¿®å¤
openclaw doctor
openclaw doctor --fix

# é…ç½®ç®¡ç†
openclaw config set
openclaw configure --section web
```

### 3. é…ç½®æ–‡ä»¶ä½ç½®ï¼ˆå®˜æ–¹ç¡®è®¤ï¼‰

**ä¸»é…ç½®æ–‡ä»¶**:
- `~/.openclaw/openclaw.json` âœ… æ­£ç¡®

**è®¤è¯æ–‡ä»¶**:
- OAuth: `~/.openclaw/credentials/oauth.json`
- Auth Profiles: `~/.openclaw/agents/<agentId>/agent/auth-profiles.json`
- æ—§ç‰ˆè¿ç§»: `~/.openclaw/agent/*` â†’ `~/.openclaw/agents/<defaultAgentId>/agent/*`

**å·¥ä½œåŒº**:
- é»˜è®¤: `~/.openclaw/workspace`
- å¯é€šè¿‡ `agents.defaults.workspace` é…ç½®

**ç¯å¢ƒå˜é‡**:
- å…¨å±€: `~/.openclaw/.env`
- å½“å‰ç›®å½•: `./.env`

### 4. é…ç½®æ–‡ä»¶ç»“æ„ï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰

**æœ€å°é…ç½®**:
```json
{
  "agents": {
    "defaults": {
      "workspace": "~/.openclaw/workspace"
    }
  },
  "channels": {
    "whatsapp": {
      "allowFrom": ["+15555550123"]
    }
  }
}
```

**å®Œæ•´é…ç½®å…³é”®å­—æ®µ**:
```json
{
  "agents": {
    "defaults": {
      "workspace": "~/.openclaw/workspace",
      "model": {
        "primary": "anthropic/claude-sonnet-4-5",
        "fallbacks": ["openai/gpt-5-mini"]
      },
      "imageModel": {
        "primary": "openai/dall-e-3"
      },
      "contextTokens": 200000,
      "maxConcurrent": 3,
      "subagents": {
        "model": "minimax/MiniMax-M2.1",
        "maxConcurrent": 1
      },
      "heartbeat": {
        "every": "30m",
        "target": "last"
      }
    }
  },
  "models": {
    "providers": {
      "anthropic": {
        "apiKey": "${ANTHROPIC_API_KEY}"
      },
      "openai": {
        "apiKey": "${OPENAI_API_KEY}"
      }
    }
  },
  "channels": {
    "whatsapp": {
      "dmPolicy": "pairing",
      "allowFrom": ["+15555550123"]
    },
    "telegram": {
      "token": "${TELEGRAM_BOT_TOKEN}",
      "dmPolicy": "open"
    }
  },
  "gateway": {
    "port": 18789,
    "bind": "loopback",
    "auth": {
      "mode": "token",
      "token": "${OPENCLAW_GATEWAY_TOKEN}"
    }
  }
}
```

### 5. ç¯å¢ƒå˜é‡ï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰

**é…ç½®æ–¹å¼**:
1. `.env` æ–‡ä»¶ï¼ˆæ¨èï¼‰
2. `openclaw.json` ä¸­çš„ `env.vars`
3. ç³»ç»Ÿç¯å¢ƒå˜é‡

**ç¯å¢ƒå˜é‡æ›¿æ¢**:
- æ ¼å¼: `${VAR_NAME}`
- ä»…æ”¯æŒå¤§å†™: `[A-Z_][A-Z0-9_]*`
- è½¬ä¹‰: `$${VAR}` â†’ `${VAR}`

**ç¤ºä¾‹**:
```bash
# ~/.openclaw/.env
ANTHROPIC_API_KEY=sk-ant-xxx
OPENAI_API_KEY=sk-xxx
TELEGRAM_BOT_TOKEN=xxx
OPENCLAW_GATEWAY_TOKEN=xxx
```

### 6. æ¨¡å‹é…ç½®ï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰

**æ¨¡å‹åˆ«å**:
```json
{
  "agents": {
    "defaults": {
      "models": {
        "anthropic/claude-opus-4-5": {
          "alias": "opus"
        },
        "anthropic/claude-sonnet-4-5": {
          "alias": "sonnet"
        },
        "openai/gpt-5.2": {
          "alias": "gpt"
        }
      }
    }
  }
}
```

**æ¨¡å‹å‚æ•°**:
```json
{
  "agents": {
    "defaults": {
      "models": {
        "anthropic/claude-sonnet-4-5": {
          "params": {
            "temperature": 0.6
          }
        }
      }
    }
  }
}
```

### 7. Skills ç³»ç»Ÿï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰

**Skills ä½ç½®**:
1. å†…ç½® Skillsï¼ˆéšå®‰è£…åŒ…ï¼‰
2. ç®¡ç†çš„ Skills: `~/.openclaw/skills`
3. å·¥ä½œåŒº Skills: `<workspace>/skills`

**ClawHub å‘½ä»¤**:
```bash
# å®‰è£… Skill
clawhub install <skill-slug>

# æ›´æ–°æ‰€æœ‰ Skills
clawhub update --all

# åŒæ­¥ Skills
clawhub sync --all
```

**Skill æ ¼å¼**:
```markdown
---
name: skill-name
description: Skill description
user-invocable: true
disable-model-invocation: false
---

Skill instructions here...
```

### 8. é¢‘é“é…ç½®ï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰

**WhatsApp**:
```json
{
  "channels": {
    "whatsapp": {
      "dmPolicy": "pairing",
      "allowFrom": ["+15555550123"],
      "groups": {
        "*": {
          "requireMention": true
        }
      }
    }
  }
}
```

**Telegram**:
```json
{
  "channels": {
    "telegram": {
      "token": "${TELEGRAM_BOT_TOKEN}",
      "dmPolicy": "open",
      "groups": {
        "*": {
          "requireMention": true
        }
      }
    }
  }
}
```

### 9. é…ç½®éªŒè¯ï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰

**ä¸¥æ ¼éªŒè¯**:
- æœªçŸ¥å­—æ®µ â†’ æ‹’ç»å¯åŠ¨
- ç±»å‹é”™è¯¯ â†’ æ‹’ç»å¯åŠ¨
- æ— æ•ˆå€¼ â†’ æ‹’ç»å¯åŠ¨

**è¯Šæ–­å‘½ä»¤**:
```bash
openclaw doctor          # æŸ¥çœ‹é—®é¢˜
openclaw doctor --fix    # è‡ªåŠ¨ä¿®å¤
```

### 10. é…ç½®çƒ­é‡è½½ï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰

**RPC æ–¹å¼**:
```bash
# è·å–é…ç½®
openclaw gateway call config.get --params '{}'

# åº”ç”¨é…ç½®
openclaw gateway call config.apply --params '{...}'

# éƒ¨åˆ†æ›´æ–°
openclaw gateway call config.patch --params '{...}'
```

---

## ğŸ’¡ Token ä¼˜åŒ–ç­–ç•¥ï¼ˆæ¥è‡ªå®æˆ˜ç»éªŒï¼‰

### Token æ¶ˆè€—çš„ 6 å¤§åŸå› 

1. **æŒç»­çš„ä¸Šä¸‹æ–‡çª—å£ç´¯ç§¯** - æ¯æ¬¡è¯·æ±‚å‘é€å®Œæ•´å†å²
2. **å·¥å…·è¾“å‡ºæ— é™å­˜å‚¨** - å¤§é‡è¾“å‡ºå­˜å…¥ session
3. **ç³»ç»Ÿæç¤ºæ¯æ¬¡é‡å‘** - 5K-10K tokens æ¯æ¬¡éƒ½å‘
4. **å¤æ‚ä»»åŠ¡å¤šè½®æ¨ç†** - å•ä¸ªä»»åŠ¡ 5-10 æ¬¡ API è°ƒç”¨
5. **æ¨¡å‹é€‰æ‹©ä¸å½“** - ç”¨ Opus åšç®€å•ä»»åŠ¡
6. **Heartbeat åå°ä»»åŠ¡** - æ¯æ¬¡è§¦å‘éƒ½æ˜¯å®Œæ•´è°ƒç”¨

### 6 å¤§ä¼˜åŒ–ç­–ç•¥

#### ç­–ç•¥ 1: å®šæœŸé‡ç½® Sessionï¼ˆèŠ‚çœ 40-60%ï¼‰

```bash
# æ–¹æ³• 1: èŠå¤©ä¸­é‡ç½®
openclaw "reset session"

# æ–¹æ³• 2: åˆ é™¤ session æ–‡ä»¶
rm -rf ~/.openclaw/agents.main/sessions/*.jsonl

# æ–¹æ³• 3: ä½¿ç”¨å‹ç¼©å‘½ä»¤
openclaw /compact
```

**æœ€ä½³å®è·µ**: æ¯å®Œæˆä¸€ä¸ªç‹¬ç«‹ä»»åŠ¡åé‡ç½® session

#### ç­–ç•¥ 2: éš”ç¦»å¤§è¾“å‡ºæ“ä½œï¼ˆèŠ‚çœ 20-30%ï¼‰

```bash
# âŒ é”™è¯¯: åœ¨ä¸» session æ‰§è¡Œ
openclaw "show full system config"

# âœ… æ­£ç¡®: ä½¿ç”¨ç‹¬ç«‹ debug session
openclaw --session debug "show full system config"
```

#### ç­–ç•¥ 3: æ™ºèƒ½æ¨¡å‹åˆ‡æ¢ï¼ˆèŠ‚çœ 50-80%ï¼‰

```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "anthropic/claude-sonnet-4",
        "fallback": "anthropic/claude-haiku-4"
      }
    }
  }
}
```

**ä»·æ ¼å¯¹æ¯”**:
- Haiku: $0.25/1M input, $1.25/1M output
- Sonnet: $3/1M input, $15/1M output
- Opus: $15/1M input, $75/1M output

#### ç­–ç•¥ 4: å¯ç”¨ç¼“å­˜ä¼˜åŒ–ï¼ˆèŠ‚çœ 30-50%ï¼‰

```json
{
  "agents": {
    "defaults": {
      "cache-ttl": 3600,
      "temperature": 0.2
    }
  }
}
```

**å…³é”®æŠ€å·§**:
- ä½æ¸©åº¦ï¼ˆ0.2ï¼‰æé«˜ç¼“å­˜å‘½ä¸­ç‡
- Heartbeat é—´éš”ç•¥å°äºç¼“å­˜ TTL

#### ç­–ç•¥ 5: é™åˆ¶ä¸Šä¸‹æ–‡çª—å£ï¼ˆèŠ‚çœ 20-40%ï¼‰

```json
{
  "agents": {
    "defaults": {
      "contextTokens": 50000,
      "compaction": "aggressive"
    }
  }
}
```

**å»ºè®®**: é™åˆ¶ä¸º 50K-100K è€Œéé»˜è®¤ 400K

#### ç­–ç•¥ 6: ä½¿ç”¨æœ¬åœ°æ¨¡å‹ï¼ˆèŠ‚çœ 60-80%ï¼‰

```json
{
  "models": {
    "providers": {
      "ollama": {
        "baseUrl": "http://localhost:11434",
        "models": ["llama3.3", "qwen2.5"]
      }
    }
  },
  "routing": {
    "simple_queries": "ollama/llama3.3"
  }
}
```

---

## ğŸ”§ é…ç½®æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ $include æ¨¡å—åŒ–é…ç½®

```json
{
  "$include": [
    "~/.openclaw/config/models.json",
    "~/.openclaw/config/channels.json"
  ],
  "agents": {
    "defaults": {
      "workspace": "~/.openclaw/workspace"
    }
  }
}
```

### 2. ç¯å¢ƒå˜é‡ç®¡ç†

**æ¨èç»“æ„**:
```bash
# ~/.openclaw/.env
# AI Providers
ANTHROPIC_API_KEY=sk-ant-xxx
OPENAI_API_KEY=sk-xxx
DEEPSEEK_API_KEY=sk-xxx

# Channels
TELEGRAM_BOT_TOKEN=xxx
DISCORD_BOT_TOKEN=xxx

# Gateway
OPENCLAW_GATEWAY_TOKEN=xxx
```

### 3. å¤š Agent è·¯ç”±

```json
{
  "agents": {
    "list": [
      {
        "id": "main",
        "workspace": "~/.openclaw/workspaces/main"
      },
      {
        "id": "work",
        "workspace": "~/.openclaw/workspaces/work"
      }
    ]
  }
}
```

### 4. ç¾¤ç»„æ¶ˆæ¯æ§åˆ¶

```json
{
  "channels": {
    "telegram": {
      "groups": {
        "*": {
          "requireMention": true
        }
      }
    }
  },
  "messages": {
    "groupChat": {
      "mentionPatterns": ["@openclaw"]
    }
  }
}
```

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. Bun è¿è¡Œæ—¶è­¦å‘Š

**å®˜æ–¹è­¦å‘Š**: Bun åœ¨ WhatsApp å’Œ Telegram é¢‘é“æœ‰å·²çŸ¥é—®é¢˜

**æ¨è**: ä½¿ç”¨ Node.js è¿è¡Œç½‘å…³

### 2. é…ç½®éªŒè¯ä¸¥æ ¼æ€§

**é‡è¦**: OpenClaw åªæ¥å—å®Œå…¨åŒ¹é… schema çš„é…ç½®
- æœªçŸ¥å­—æ®µ â†’ æ‹’ç»å¯åŠ¨
- ç±»å‹é”™è¯¯ â†’ æ‹’ç»å¯åŠ¨
- å¿…é¡»è¿è¡Œ `openclaw doctor` è¯Šæ–­

### 3. å‰ææ¡ä»¶

**å¿…éœ€**:
- Node.js >= 22
- æ¨è: Brave Search API Keyï¼ˆç”¨äº web æœç´¢ï¼‰

**å¹³å°**:
- macOS: æ¨èå®‰è£… Xcode/CLT
- Windows: **å¿…é¡»ä½¿ç”¨ WSL2**ï¼ˆåŸç”Ÿ Windows æœªç»æµ‹è¯•ï¼‰

### 4. è®¤è¯å­˜å‚¨ä½ç½®

**é‡è¦**: è®¤è¯æ–‡ä»¶ä½ç½®å·²å˜æ›´
- æ—§ç‰ˆ: `~/.openclaw/agent/*`
- æ–°ç‰ˆ: `~/.openclaw/agents/<agentId>/agent/*`
- è¿ç§»: è¿è¡Œ `openclaw doctor` è‡ªåŠ¨è¿ç§»

---

## ğŸ“‹ å®˜æ–¹æ¨èçš„å®‰è£…æµç¨‹

### æ ‡å‡†æµç¨‹

```bash
# 1. å®‰è£… CLI
curl -fsSL https://clawd.org.cn/install.sh | bash
# æˆ–
npm install -g openclaw-cn@latest

# 2. è¿è¡Œå…¥é—¨å‘å¯¼ï¼ˆæ¨èï¼‰
openclaw-cn onboard --install-daemon

# 3. å¯åŠ¨ç½‘å…³
openclaw-cn gateway --port 18789

# 4. éªŒè¯
openclaw-cn status
openclaw-cn health

# 5. é…å¯¹é¢‘é“ï¼ˆå¯é€‰ï¼‰
openclaw-cn channels login
```

### å‘å¯¼ä¼šé…ç½®

1. **æœ¬åœ° vs è¿œç¨‹ç½‘å…³**
2. **è®¤è¯æ–¹å¼**: OAuth æˆ– API Key
3. **Provider**: WhatsApp QR, Telegram Bot Token ç­‰
4. **å®ˆæŠ¤è¿›ç¨‹**: launchd/systemd
5. **è¿è¡Œæ—¶**: Nodeï¼ˆæ¨èï¼‰
6. **Gateway Token**: è‡ªåŠ¨ç”Ÿæˆ

---

## ğŸ¯ ä¸åŸä¼˜åŒ–æ–¹æ¡ˆçš„å¯¹æ¯”

### éœ€è¦ä¿®æ­£çš„åœ°æ–¹

1. **é…ç½®æ–‡ä»¶ç»“æ„**:
   - âŒ åŸæ–¹æ¡ˆçš„ `providers` ç»“æ„ä¸å®Œæ•´
   - âœ… åº”ä½¿ç”¨ `models.providers` ç»“æ„

2. **ç¯å¢ƒå˜é‡**:
   - âŒ åŸæ–¹æ¡ˆç¼ºå°‘ `$include` æ”¯æŒ
   - âœ… åº”æ”¯æŒé…ç½®æ¨¡å—åŒ–

3. **æ¨¡å‹é…ç½®**:
   - âŒ åŸæ–¹æ¡ˆç¼ºå°‘æ¨¡å‹åˆ«åå’Œå‚æ•°
   - âœ… åº”æ”¯æŒ `models` å’Œ `alias`

4. **Session ç®¡ç†**:
   - âŒ åŸæ–¹æ¡ˆæœªè€ƒè™‘ token ä¼˜åŒ–
   - âœ… åº”æ·»åŠ  session é‡ç½®å’Œå‹ç¼©

5. **Skills ç³»ç»Ÿ**:
   - âŒ åŸæ–¹æ¡ˆæœªæåŠ Skills
   - âœ… åº”æ”¯æŒ ClawHub å’Œ Skills ç®¡ç†

### éœ€è¦æ–°å¢çš„åŠŸèƒ½

1. **Token ä¼˜åŒ–é…ç½®**
2. **Session ç®¡ç†å·¥å…·**
3. **æ¨¡å‹æ™ºèƒ½åˆ‡æ¢**
4. **ç¼“å­˜ä¼˜åŒ–é…ç½®**
5. **Skills ç®¡ç†é›†æˆ**
6. **é…ç½®æ¨¡å—åŒ–æ”¯æŒ**

---

**æ–‡æ¡£ç»“æŸ**
